<IfModule mod_rewrite.c>
    RewriteEngine On

    # 1) استاتیک‌ها را از داخل /public سرو کن (بدون تغییر DocRoot)
    RewriteCond %{REQUEST_URI} !^/public/
    RewriteRule ^(.+\.(?:css|js|mjs|map|json|png|jpe?g|gif|svg|webp|ico|woff2?|ttf|eot|otf|mp4|webm|ogg))$ public/$1 [L]

    # 2) مسیرهای خاص رایج
    RewriteRule ^build/(.*)$ public/build/$1 [L]
    RewriteRule ^storage/(.*)$ public/storage/$1 [L]
    RewriteRule ^favicon\.ico$ public/favicon.ico [L]
    RewriteRule ^robots\.txt$ public/robots.txt [L]

    # بقیهٔ قوانین فعلی‌ات (Authorization, slash و …) همین‌جا بمانند

    # در نهایت، فرستادن باقی درخواست‌ها به لاراول
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule>

# برای سیم‌لینک احتمالی
Options +FollowSymLinks
