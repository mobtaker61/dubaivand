<IfModule mod_rewrite.c>
    RewriteEngine On

    # 1) سرو مستقیم محتواهای build/storage/... از داخل /public
    RewriteRule ^build/(.*)$ public/build/$1 [L]
    RewriteRule ^storage/(.*)$ public/storage/$1 [L]
    RewriteRule ^favicon\.ico$ public/favicon.ico [L]
    RewriteRule ^robots\.txt$ public/robots.txt [L]

    # 2) هندل کردن Authorization
    RewriteCond %{HTTP:Authorization} .
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

    # 3) حذف اسلش انتهایی اگر دایرکتوری نیست
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} (.+)/$
    RewriteRule ^ %1 [L,R=301]

    # 4) فرستادن بقیه درخواست‌ها به لاراول
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule>

# اجازه دنبال‌کردن symlink در صورت نیاز
Options +FollowSymLinks

# هدرها و php-ini خود cPanel را اگر می‌خواهی نگه دار، بگذار پایین‌تر بمانند
